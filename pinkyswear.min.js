(function(f){function k(g){return"function"==typeof g}function h(g){"undefined"!=typeof setImmediate?setImmediate(g):"undefined"!=typeof process&&process.nextTick?process.nextTick(g):setTimeout(g,0)}f[0][f[1]]=function l(){function b(a,b){null==d&&null!=a&&(d=a,m=b,c.length&&h(function(){for(var a=0;a<c.length;a++)c[a]()}));return d}var d,m=[],c=[];b.then=function(a,b){function f(){try{var c=d?a:b;if(k(c)){var h=function(a){var b,c=0;try{if(a&&("object"==typeof a||k(a))&&k(b=a.then)){if(a===e)throw new TypeError;
b.call(a,function(){c++||h.apply(void 0,arguments)},function(a){c++||e(!1,[a])})}else e(!0,arguments)}catch(d){c++||e(!1,[d])}};h(c.apply(void 0,m||[]))}else e(d,m)}catch(l){e(!1,[l])}}var e=l();null!=d?h(f):c.push(f);return e};b.always=function(a){return b.then(a,a)};b.error=function(a){return b.then(0,a)};return b}})("undefined"==typeof module?[window,"pinkySwear"]:[module,"exports"]);