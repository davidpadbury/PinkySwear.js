(function(a){function k(f){return"function"==typeof f}function g(f){"undefined"!=typeof setImmediate?setImmediate(f):"undefined"!=typeof process&&process.nextTick?process.nextTick(f):setTimeout(f,0)}a[0][a[1]]=function m(a){function b(a,b){null==d&&null!=a&&(d=a,l=b,c.length&&g(function(){for(var a=0;a<c.length;a++)c[a]()}));return d}var d,l=[],c=[];b.then=function(a,b){function h(){try{var c=d?a:b;if(k(c)){var g=function(a){var b,c=0;try{if(a&&("object"==typeof a||k(a))&&k(b=a.then)){if(a===e)throw new TypeError;
b.call(a,function(){c++||g.apply(void 0,arguments)},function(a){c++||e(!1,[a])})}else e(!0,arguments)}catch(d){c++||e(!1,[d])}};g(c.apply(void 0,l||[]))}else e(d,l)}catch(h){e(!1,[h])}}var e=m();null!=d?g(h):c.push(h);return e};a&&(b=a(b));return b}})("undefined"==typeof module?[window,"pinkySwear"]:[module,"exports"]);